# ContactChat コンポーネント

## 役割

`ContactChat` コンポーネントは、お問い合わせ機能の**チャットUI全体**を構成するコンポーネントです。
`ResponsiveDialog` コンポーネント内に配置され、ユーザーとのチャットインターフェースを提供します。
カテゴリ選択、メッセージの送受信、FAQサジェスト、ファイルアップロードなどの機能を含みます。

## ユーザーフロー

1.  **チャット開始**:  `ResponsiveDialog` コンポーネントが呼び出されると、`ContactChat` コンポーネントが初期表示されます。
2.  **カテゴリ選択**:  チャット開始画面には、お問い合わせカテゴリを選択するための `CategoryCard` コンポーネントのリストが表示されます。ユーザーは、目的のカテゴリのカードをクリックしてチャットを開始します。
3.  **チャットメッセージ**:  カテゴリ選択後、チャットUI画面に切り替わり、ユーザーはテキストメッセージを入力したり、ファイルをアップロードしたりして、AIアシスタントとのチャットを開始します。
4.  **AIアシスタントの応答**:  ユーザーのメッセージに対して、LLM (Gemini) を利用したAIアシスタントが自動応答を生成し、チャットUIに表示します。
5.  **FAQサジェスト**:  ユーザーの質問内容に応じて、AIアシスタントが関連性の高いFAQをサジェストし、チャットUIに表示します。
6.  **ファイルアップロード**:  ユーザーは、必要に応じてファイルをチャットUIにアップロードし、AIアシスタントに送信できます。
7.  **管理者へのエスカレーション**:  AIアシスタントで対応できない場合や、有人対応が必要な場合は、ユーザーは管理者へのエスカレーションをリクエストできます。
8.  **チャット終了**:  ユーザーがチャットを終了したい場合は、`ResponsiveDialog` コンポーネントを閉じることでチャットを終了できます。

## 関連コンポーネント

### 親コンポーネント
* **`ResponsiveDialog`**: ContactChatを内包し、ダイアログ/ドロワー表示を提供するコンポーネント

### 子コンポーネント
* **`CategoryCard`**: チャット開始画面でカテゴリ選択に使用するカードコンポーネント
* **`ChatMessage`**: チャットメッセージの表示に使用するコンポーネント
* **`ChatInput`**: チャット入力領域を提供するコンポーネント
* **`FAQAccordion`**: 関連FAQをアコーディオン形式で表示するコンポーネント

## 実装TODO

*   [ ] `ContactChat` コンポーネントの作成 (TypeScript, React)
*   [ ] チャット開始画面 (カテゴリ選択カードリスト) の実装
*   [ ] チャットUI画面 (メッセージ領域、入力領域、FAQサジェスト領域) の実装
*   [ ] `CategoryCard` コンポーネントのリスト表示、選択時のチャット画面切り替え実装
*   [ ] `ChatMessage` コンポーネント、`ChatInput` コンポーネントの配置、連携
*   [ ] ファイルアップロード機能の統合 ( `ChatInput` コンポーネントと連携)
*   [ ] FAQ検索機能の統合 (FAQデータ表示、検索UI実装、FAQサジェスト機能連携)
*   [ ] LLM (Gemini) との連携 (自動応答、FAQサジェスト、感情分析)
*   [ ] ユーザー機能との連携 (ログインユーザー情報の利用)
*   [ ] 管理者連携機能 (エスカレーション、通知)
*   [ ] ストーリーブックによるUI動作確認
*   [ ] 各機能の結合テスト、E2Eテスト 